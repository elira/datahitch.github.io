(window.webpackJsonp=window.webpackJsonp||[]).push([[15],{"+P1L":function(e,t,i){"use strict";i.r(t),i.d(t,"UsersModule",(function(){return L}));var a=i("2kYt"),o=i("sEIs"),r=i("D57K"),s=i("iAde"),c=i("cePI"),n=i("FlRo"),d=i("xJCX"),l=i("EM62"),u=i("NAEz"),m=i("OZ4H"),h=i("EmTj"),b=i("29Wa"),f=i("Cd2c"),g=i("PBFl");function p(e,t){1&e&&(l.Vb(0,"th",17),l.Gc(1," ID "),l.Ub())}function S(e,t){if(1&e&&(l.Vb(0,"td",18),l.Gc(1),l.Ub()),2&e){const e=t.$implicit;l.Db(1),l.Ic(" ",e.id," ")}}function D(e,t){1&e&&(l.Vb(0,"th",17),l.Gc(1," Name "),l.Ub())}function v(e,t){if(1&e&&(l.Vb(0,"td",18),l.Gc(1),l.Ub()),2&e){const e=t.$implicit;l.Db(1),l.Ic(" ",e.userName," ")}}function w(e,t){1&e&&(l.Vb(0,"th",17),l.Gc(1," Email "),l.Ub())}function y(e,t){if(1&e&&(l.Vb(0,"td",18),l.Gc(1),l.Ub()),2&e){const e=t.$implicit;l.Db(1),l.Ic(" ",e.email," ")}}function U(e,t){1&e&&l.Qb(0,"th",19)}const C=function(e,t){return["/",e,t]};function k(e,t){if(1&e){const e=l.Wb();l.Vb(0,"td",18),l.Vb(1,"button",20),l.cc("click",(function(){l.wc(e);const i=t.$implicit;return l.gc(2).makeAdmin(i.id)})),l.Gc(2,"Make admin"),l.Ub(),l.Vb(3,"button",21),l.cc("click",(function(){l.wc(e);const i=t.$implicit;return l.gc(2).deleteUser(i.id)})),l.Gc(4,"Delete"),l.Ub(),l.Vb(5,"a",22),l.Gc(6,"Edit Privileges"),l.Ub(),l.Ub()}if(2&e){const e=t.$implicit,i=l.gc(2);l.Db(5),l.mc("routerLink",l.qc(1,C,i.userDetailsRoute,e.id))}}function E(e,t){1&e&&l.Qb(0,"tr",23)}function V(e,t){1&e&&l.Qb(0,"tr",24)}const I=function(){return[5,10,25,100]};function A(e,t){if(1&e&&(l.Vb(0,"div",5),l.Vb(1,"table",6),l.Tb(2,7),l.Ec(3,p,2,0,"th",8),l.Ec(4,S,2,1,"td",9),l.Sb(),l.Tb(5,10),l.Ec(6,D,2,0,"th",8),l.Ec(7,v,2,1,"td",9),l.Sb(),l.Tb(8,11),l.Ec(9,w,2,0,"th",8),l.Ec(10,y,2,1,"td",9),l.Sb(),l.Tb(11,12),l.Ec(12,U,1,0,"th",13),l.Ec(13,k,7,4,"td",9),l.Sb(),l.Ec(14,E,1,0,"tr",14),l.Ec(15,V,1,0,"tr",15),l.Ub(),l.Qb(16,"mat-paginator",16),l.Ub()),2&e){const e=l.gc();l.Db(1),l.mc("dataSource",e.dataSource),l.Db(13),l.mc("matHeaderRowDef",e.displayedColumns),l.Db(1),l.mc("matRowDefColumns",e.displayedColumns),l.Db(1),l.mc("pageSizeOptions",l.oc(4,I))}}const M=[{path:"",component:(()=>{class e{constructor(e,t,i){this.usersStateService=e,this.dialog=t,this.dhDialogService=i,this.ready=!1,this.displayedColumns=["id","name","email","actions"],this.userDetailsRoute=d.a.userDetails}ngOnInit(){return Object(r.a)(this,void 0,void 0,(function*(){if(this.dhDialogService.showLoading(),yield this.usersStateService.getAllusers())return void this.dhDialogService.showErrorMessage("Could not load users.");const e=this.usersStateService.getUsersInState();this.dataSource=new n.k(e),this.dhDialogService.hideLoading(),this.ready=!0,setTimeout(()=>{this.dataSource.paginator=this.paginator,this.dataSource.sort=this.sort},10)}))}applyFilter(e){this.dataSource.filter=e.target.value.trim().toLowerCase(),this.dataSource.paginator&&this.dataSource.paginator.firstPage()}makeAdmin(e){return Object(r.a)(this,void 0,void 0,(function*(){if(!(yield this.dhDialogService.showConfirmation({message:"Are you sure you want to make user admin?",title:"Make Admin"}).toPromise()))return;this.dhDialogService.showLoading();const t=yield this.usersStateService.makeUserAdmin({userId:e});this.dhDialogService.hideLoading(),t?this.dhDialogService.showErrorMessage("Could not make user admin"):(this.dhDialogService.showMessage("User Is Admin"),this.update())}))}revokeAllRights(){}deleteUser(e){return Object(r.a)(this,void 0,void 0,(function*(){if(!(yield this.dhDialogService.showConfirmation({message:"Are you sure you want to delete this user?",title:"Delete User"}).toPromise()))return;this.dhDialogService.showLoading();const t=yield this.usersStateService.deleteUser({userId:e});this.dhDialogService.hideLoading(),t?this.dhDialogService.showErrorMessage("Could not delete user"):(this.dhDialogService.showMessage("User deleted"),this.update())}))}update(){this.dataSource.data=this.usersStateService.getUsersInState()}}return e.\u0275fac=function(t){return new(t||e)(l.Pb(u.a),l.Pb(m.b),l.Pb(h.a))},e.\u0275cmp=l.Jb({type:e,selectors:[["dh-users"]],viewQuery:function(e,t){if(1&e&&(l.Jc(s.a,!0),l.Jc(c.a,!0)),2&e){let e;l.tc(e=l.dc())&&(t.paginator=e.first),l.tc(e=l.dc())&&(t.sort=e.first)}},decls:8,vars:1,consts:[[1,"p-4"],[1,"flex","justify-between"],["matInput","","placeholder","Account Name",3,"keyup"],["input",""],["class","mat-elevation-z8",4,"ngIf"],[1,"mat-elevation-z8"],["mat-table","","matSort","",1,"w-full",3,"dataSource"],["matColumnDef","id"],["mat-header-cell","","mat-sort-header","",4,"matHeaderCellDef"],["mat-cell","",4,"matCellDef"],["matColumnDef","name"],["matColumnDef","email"],["matColumnDef","actions"],["mat-header-cell","",4,"matHeaderCellDef"],["mat-header-row","",4,"matHeaderRowDef"],["mat-row","",4,"matRowDef","matRowDefColumns"],[3,"pageSizeOptions"],["mat-header-cell","","mat-sort-header",""],["mat-cell",""],["mat-header-cell",""],["mat-raised-button","","color","primary",1,"",3,"click"],["mat-raised-button","","color","warn",1,"ml-2",3,"click"],["mat-raised-button","","color","primary",1,"ml-2",3,"routerLink"],["mat-header-row",""],["mat-row",""]],template:function(e,t){1&e&&(l.Vb(0,"div",0),l.Vb(1,"div",1),l.Vb(2,"mat-form-field"),l.Vb(3,"mat-label"),l.Gc(4,"Filter"),l.Ub(),l.Vb(5,"input",2,3),l.cc("keyup",(function(e){return t.applyFilter(e)})),l.Ub(),l.Ub(),l.Ub(),l.Ec(7,A,17,5,"div",4),l.Ub()),2&e&&(l.Db(7),l.mc("ngIf",t.ready))},directives:[b.b,b.e,f.a,a.m,n.j,n.c,n.e,n.b,n.g,n.i,s.a,n.d,n.a,g.b,g.a,o.d,n.f,n.h],styles:[""]}),e})()}];let G=(()=>{class e{}return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[o.e.forChild(M)],o.e]}),e})(),L=(()=>{class e{}return e.\u0275mod=l.Nb({type:e}),e.\u0275inj=l.Mb({factory:function(t){return new(t||e)},imports:[[a.c,G,n.l,b.d,s.b,f.b,g.c]]}),e})()}}]);